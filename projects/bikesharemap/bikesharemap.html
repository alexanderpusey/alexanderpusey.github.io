<!doctype html>
<html>

    <head>
        <title>Alex's Website</title>
        <link rel="stylesheet" href="/swag.css">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="apple-itunes-app" content="app-id=6479473158">
    </head>

    <body>

        <div class="documentation">

            <h1>bikesharemap</h1>
            <a href="/pages/projects.html" class="content-block-title"> &lt; projects</a>
            <p>Note: This documentation details the software half of my Senior Year Project. The hardware half can be read <a href="/projects/bikeshareseat/bikeshareseat.html">here.</a></p>
            <p>An early hurdle I encountered when beginning to using an Apple Watch as my mobile device (irrelevant), was no longer having access to Boulder BCycle's IOS-only app. I previously used the app to locate and view the status of bike docks as well as to facilitate the unlocking of bike from dock. Curious to whether this lack of WatchOS support was common among other bikeshare providers, I searched the Apple Watch App Store and was surprised not to find a single app fitting the description. I had already flirted with the idea of writing a Swift application so only a minor amount of self convincing was required for me to believe this was a great idea worth doing.</p>
            <div class="media-gallery">
                <img src="/media/karljilg.jpeg">
                <img src="/media/bikesharemap.png">
            </div>
            <p>As much as I desired to make an app that could unlock a bike, I knew early on that functionality of the sort would require authenticated requests to be sent to BCycle's servers — something I couldn’t get, even if I asked nicely. While this reality would make unlocking technically infeasible, I had other functionality I wanted to develop and was getting pretty accustomed to unlocking bikes by way of key card anyhow. Put differently, I was in love and had to rationalize my expectations.</p>
            <p>I did design and code a mock unlocking UI which uses the rotation of the Apple Watch’s digital crown to “select” a bike from a dock.</p>
            <div class="media-gallery ">
                <video controls autoplay loop>
                    <source src="/media/unlock.mp4" type="video/mp4">
                </video>
                <img src="/media/uidesign.png">
                <img src="/media/unlockdesign.png">
            </div>
            <p>As a bikeshare enthusiast, I was already familiar with the General Bikeshare Feed Specification (GBFS), an open data standard for shard mobility systems. The widespread adoption of GBFS amongst bike share providers inspired me to make a system-agnostic bike share app which can display the live service maps of 300+ bike share systems worldwide.</p>
            <p>To save users from having to scroll through a list to find their local bikeshare system, I implemented location-based filtering to only show systems within a certain distance. To achieve this I parsed the GBFS <a href="https://github.com/MobilityData/gbfs/blob/master/systems.csv">systems.csv</a> file into JSON, which I then ran through a Javascript program to calculate and record the approximate centers of all the systems. The resulting JSON file lives publicly on my GitHub and is queried by the app. I have plans to sophisticate these means of processing and hosting data at a later time. Once the app’s performed the network request to receive the system data, it persists it using the Swift Data framework. To remember the user’s selected bike share system between launches, it stores a token in app storage.</p>
            <div class="media-gallery">
                <img src="/media/locationfilter.png">
                <img src="/media/bikesharemapsearch.png">
                <img src="/media/locationfilteriphone.png">
                <img src="/media/searchiphone.png">
            </div>
            <p>A large portion of the development time was dedicated to positioning the map and rendering map pins. I got slow performance on WatchOS device simulators when they attempted to render large numbers of map pins. I believe the poor performance was attributed to high CPU load when rendering the pins (especially at motion) coupled with significant memory allocation (which only gets worse as more pins are uncovered by the map). To resolve these issues I employed more location-based logic to only show pins that were visible to the map’s camera. To prevent app crashes I also implemented logic to limit the max zoom-out height on the maps of extremely dense systems. These solutions proved effective in preventing bottlenecks and improving performance.</p>
            <div class="media-gallery">
                <img src="/media/boulder.png">
                <img src="/media/baywheels.png">
            </div>
            <p>There was a bunch of other stuff I had to do which included but unfortunately was not limited to: implementing custom search, making my own return-to-user-location button, and overriding a lot of default SwiftUI navigation and layout defaults.</p>
            <p>I successfully published the app to the App Store, and was relieved to pass app review on my first attempt. This was in the same ballpark of difficulty as paying my taxes. The app can be downloaded <a href="https://apps.apple.com/app/bikesharemap/id6479473158">here</a> for 99 cents both on IOS and WatchOS.</p>
            <div class="media-gallery">
                <img src="/media/iphoneappicon.png">
            </div>
            <p>Tragically, I noticed some in-production bugs that weren’t present in the simulators. Most annoyingly on WatchOS the system list items are duplicating. I didn't get around to releasing a V1.1 as I had to get down to realizing an auto-adjusting seat post for bikeshare. You can read all about that here.</p>

        </div>


    </body>

</html>